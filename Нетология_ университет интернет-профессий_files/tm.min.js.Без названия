"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};(function(){var m=Math.floor;function a(){q=arguments[0],r=2===arguments.length?null:arguments[1],s=2===arguments.length?arguments[1]:arguments[2],s&&s.initApiCall&&c("pageview",null,null,null,null,s.data)}function b(){if(!v)u=document.referrer;else{var a=document.location.href;a!==v&&(u=v)}return v=document.location.href,encodeURI(u)}function c(a,c,k,l,m,q){var r={userId:n||window.$tmt_user_id,pageviewId:t,type:a,userTs:new Date().getTime(),tz:"undefined"==typeof Intl?"N/A":Intl.DateTimeFormat().resolvedOptions().timeZone,url:encodeURI(document.documentURI),referrer:b(),pageTitle:document.title,br_w:screen.width,br_h:screen.height,w_w:window.innerWidth,w_h:window.innerHeight,uid_ga:f||j("_ga"),uid_gid:p||j("_gid"),uid_ym:o||j("_ym_uid"),ver:"v1.3.2",eventType:c?encodeURI(g(c)):void 0,eventValue:k?encodeURI(g(k)):void 0,eventLabel:l?encodeURI(g(l)):void 0,eventCategory:m?encodeURI(g(m)):void 0,eventData:q===void 0?void 0:e(q)},d=new XMLHttpRequest;d.onreadystatechange=function(){if(4===d.readyState&&(200===d.status||400===d.status))try{i(JSON.parse(d.responseText))}catch(a){console.error(a)}},d.timeout=1e4,d.withCredentials=!0,d.open("POST",h(),!0),d.setRequestHeader("Content-Type","text/plain;charset=UTF-8"),d.send(JSON.stringify(r))}function e(a){if("object"===("undefined"==typeof a?"undefined":_typeof(a)))for(var b in a)a[b]=e(a[b]);else a=encodeURI(g(a));return a}function g(a){return a&&void 0!==a.replace?a.replace(/"/g,"\\\""):a}function h(){var a=B.concat("/track/watch").concat("?cid=").concat(q).concat("&orig=").concat(decodeURI(document.location.origin)).concat("&sidl=").concat(w).concat("&sids=").concat(d).concat("&sidu=").concat(x);return y&&(y=!1,a=a.concat("&ss=").concat("1")),z&&(z=!1,a=a.concat("&sl=").concat("1")),A&&(A=!1,a=a.concat("&su=").concat("1")),r&&(a=a.concat("&tid=").concat(r)),a}function i(a){a&&(a.status&&"Bad Request"===a.status?console.log("TM: "+a.status):a.list&&navigator.cookieEnabled&&(localStorage.setItem("_tm_uid",a.uid),a.list.forEach(function(a){!a.update||("_tm_st_sid"===a.name&&(d=a.value),"_tm_lt_sid"===a.name&&(w=a.value),k(a.name,a.value,a.age,a.domain))})))}function j(a){var b="; "+document.cookie,c=b.split("; "+a+"=");if(2===c.length)return c[1].split(";")[0]}function k(a,b,c,d){var e="";if(c){var f=new Date;f.setTime(f.getTime()+1e3*c),e="; expires="+f.toUTCString()}document.cookie=a+"="+(b||"")+e+"; path=/; Domain="+d}function l(){var a=new Date().getTime()+"."+m(1e6*Math.random());return a}var n,o,f,p,q,r,s,t,u,v;t=function(){var a=new Date().getTime(),b="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(b){var c=0|(a+16*Math.random())%16;return a=m(a/16),("x"===b?c:8|3&c).toString(16)});return b}();var w=j("_tm_lt_sid"),d=j("_tm_st_sid"),x=navigator.cookieEnabled?localStorage.getItem("_tm_uid"):null,y=!1,z=!1,A=!1;w||(w=l(),z=!0),d||(d=l(),y=!0),x||(x=l(),A=!0);var B="https://api.topmind.io",C={init:a,setUserId:function(a){n=a},setGa:function(a){f=a},setGid:function(a){p=a},setYm:function(a){o=a},setTrackerHost:function(a){B=a},send:function(a,b,d,e,f){c("event",a,b,d,e,f)},pageview:function(){var a=0<arguments.length&&arguments[0]!==void 0?arguments[0]:null;null==a?c("pageview"):c("pageview",null,null,null,null,a)},getCookie:j,setCookie:k},D=function(){var a=[].slice.call(arguments);C[a.shift()].apply(null,a)};window.$tmt&&window.$tmt.q.forEach(function(b){return D.apply(null,b)}),window.addEventListener("beforeunload",function(){}),window.$tmt=D})();
